- name: Movable Type (optional), MySQL5.7 or later, Apache2.4 or Nginx, Starman(PSGI), PHP7 installed 
  hosts: all
  gather_facts: True
  become: yes
  roles:
    - role: common
      tags: common
    - role: postfix
      tags: postfix
    - role: firewall
      tags: firewall
      when: ((ansible_distribution == "CentOS" ) or (ansible_distribution == 'RedHat' )) and ( ansible_distribution_major_version >= "7")
    - role: swap
      tags: swap
    - role: aws
      tags: aws
      when: ansible_distribution == "Amazon"
    - role: mysql
      tags: mysql
      when: mysql | bool
    - role: letsencrypt
      tags: letsencrypt
      when: letsencrypt | bool
    - role: nginx
      tags: nginx
      when: nginx | bool
    - role: httpd
      tags: httpd
      when: apache | bool
    - role: sshd
      tags: sshd
    - role: php
      tags: php 
      when: php | bool
    - role: ImageMagick
      tags: ImageMagick
      when: ImageMagick | bool
    - role: perl
      tags: perl
      when: movabletype | bool 
    - role: movabletype
      tags: movabletype
      when: movabletype | bool 
    - role: supervisord
      tags: supervisord
      when: movabletype | bool 
  
